window.addEventListener("load",function(k){function P(a){wa&&(new firebaseui.auth.AuthUI(m.auth())).start("#div-auth-container",{signInOptions:[m.auth.FacebookAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(a,c){var b=a.user,h=a.credential,f=a.additionalUserInfo.providerId,g=a.operationType;a.additionalUserInfo.isNewUser&&console.log("This is a new user");console.log(b);console.log(h);console.log(b);console.log(f);console.log(g);return!0},signInFailure:function(a){console.log(a)}},
signInSuccessUrl:a})}function I(){return m.database().ref("kku/comment")}function C(){return m.database().ref("kku/review")}function Q(a){var b=!1;if(a.emailVerified)b=!0;else for(var c=0;c<a.providerData.length;++c)if("facebook.com"===a.providerData[c].providerId){b=!0;break}return b}function R(){var a=m.auth().currentUser;if(!a)throw"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a";if(!Q(a))throw window.location.href="/dashboard.html","\u0e42\u0e1b\u0e23\u0e14\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e01\u0e48\u0e2d\u0e19";
return a}function xa(a){a.order&&(a.teacherId=(a.order-1).toString())}function S(a){var b=null;if(a){b={};a=a.replace("?","");a=a.split("&");for(var c=0;c<a.length;++c){var d=a[c].split("=");d[0]&&""!=d[0]&&(b[d[0]]=decodeURI(d[1]))}}return b}function ya(a,b,c){var d=[],h=[];b=b.trim(" ");b=b.toLowerCase();for(var f=b.split(" "),g=f.indexOf("");-1<g;)f.splice(g,1),g=f.indexOf("");for(g=0;g<a.length;++g)if(a[g][c])if(-1<a[g][c].toLowerCase().search(b))d.push(a[g]);else for(var y=0;y<f.length;++y){var e=
f[y];if(!za[e]&&-1<a[g][c].toLowerCase().search(e)){h.push(a[g]);break}}else break;return d=d.concat(h)}function Aa(a){a=new Date(a);return a.getDate().toString()+"/"+(a.getMonth()+1).toString()+"/"+(a.getFullYear()+543).toString()}function Ba(a,b){var c=a;if(227<a.length){c=a.substring(0,227);var d=a.substring(227);c+='<span class="collapse" id="'+b+'">'+d+'</span> <a data-toggle="collapse" href="#'+b+'" data-target="#'+b+'">\u0e2d\u0e48\u0e32\u0e19\u0e15\u0e48\u0e2d... </a>'}return c}function T(a){var b=
"<div> N/A </div>";a=parseFloat(a);isNaN(a)||(0<a&&1>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':1==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
1<a&&2>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':2==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
2<a&&3>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':3==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
3<a&&4>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':4==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
4<a&&5>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t\t\t\t\t\t\t</div>':5==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t\t\t\t\t\t\t</div>':
0==a&&(b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>'));return b}function J(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}function U(a,b){return a&&!isNaN(a)&&
b?(Math.round(100*a)/100*b).toString():"N/A"}function u(a,b){e.query||(e.query={});var c=Object.keys(e.query),d=e.path+"?",h=!1;b=encodeURI(b);for(var f=0;f<c.length;f++)d=d+c[f]+"=",c[f]==a?(d+=b,h=!0):d+=e.query[c[f]],f!=c.length-1&&(d+="&");h||(d=d+"&"+a+"="+b);history.pushState(null,null,d);e.path=location.pathname;e.query=S(location.search)}function V(a,b){var c=[];if(a.exists()){var d=Object.keys(a.val()).length,h=0;a.forEach(function(a){c.push(a);h++;h==d&&b&&b(c)})}else b&&b(c)}function W(a,
b,c,d){return{useful:{userDict:a?a:{},count:b?b:0},notUseful:{userDict:c?c:{},count:d?d:0}}}function Ca(a,b,c,d,h,f,g,y,e){a={uid:a,teacherId:b,courseId:c,difficulty:d,gradRecieved:h,rating:f,retake:g,text:y,timestamp:m.database.ServerValue.TIMESTAMP};I().push(a).then(function(a){e&&e(!0)})["catch"](function(a){console.log(a);e&&e(!1)})}function Da(a,b,c,d,h){C().push({uid:c,commentId:a,teacherId:b,useful:d}).then(function(a){h&&h(!0)})["catch"](function(a){console.log(a);h&&h(!1)})}function Ea(a,
b,c){C().orderByChild("uid").equalTo(b).once("value").then(function(b){if(b.exists()){var d=Object.keys(b.val()).length,f=0;b.forEach(function(b){if(b.val().commentId==a)return c(b),!0;f++;f==d&&c&&c(null)})}else c&&c(null)})["catch"](function(a){console.log(a);c&&c(null)})}function Fa(a,b){C().child(a).remove().then(function(a){b&&b(!0)})["catch"](function(a){b&&b(!1)})}function Ga(a,b){I().orderByChild("timestamp").limitToLast(a).once("value").then(function(a){b&&b(a)})}function Ha(a,b){I().orderByChild("teacherId").equalTo(a).once("value").then(function(a){b&&
b(a)})}function Ia(a,b){C().orderByChild("teacherId").equalTo(a).once("value").then(function(a){b&&b(a)})["catch"](function(a){throw a;})}function Ja(a,b){var c=[];try{Ha(a,function(a){V(a,function(a){b&&(a=a.reverse(),b(a))})})}catch(d){console.log(d),b&&b(c)}}function Ka(a,b){var c=[];try{Ia(a,function(a){V(a,function(a){b&&b(a)})})}catch(d){console.log(d),b&&b(c)}}function X(a,b){La(a,function(c){Ja(a,function(a){var d=null;0<a.length&&(d={rating:0,ratingSize:0,difficulty:0,difficultySize:0,retake:0,
retakeSize:0,commentSize:0});for(var f=0;f<a.length;++f){var g=a[f].key;a[f].review=c[g]?c[g].review:W();g=a[f].val();"N/A"!=g.difficulty&&(d.difficulty+=parseInt(g.difficulty),d.difficultySize++);"N/A"!=g.retake&&(d.retake+="Yes"==g.retake?1:0,d.retakeSize++);"N/A"!=g.rating&&(d.rating+=parseInt(g.rating),d.ratingSize++)}d&&(d.difficulty/=d.difficultySize,d.retake?(d.retake/=d.retakeSize,1>d.retake&&(d.retake=1-d.retake)):d.retake=0,d.commentSize=a.length,d.rating/=d.ratingSize);b&&b(a,d)})})}function La(a,
b){var c={};Ka(a,function(a){for(var d=0;d<a.length;++d){var f=a[d].val(),g=f.commentId,e=f.useful;c[g]||(c[g]={review:W()});e?(c[g].review.useful.userDict[f.uid]=!0,c[g].review.useful.count++):(c[g].review.notUseful.userDict[f.uid]=!0,c[g].review.notUseful.count++)}b&&b(c)})}function Ma(a,b){for(var c=[],d={i:0};d.i<a.length;d={teacherId:d.teacherId,i:d.i},++d.i){d.teacherId=a[d.i].teacherId;var h=new Promise(function(b){return function(c,d){X(b.teacherId,function(d,f){a[b.i].overviewInfo=f;c(!0)})}}(d));
c.push(h)}Promise.all(c).then(function(a){b(!0)})}function Na(a,b){var c={},d=[];Ga(1E3,function(h){if(h.exists()){var f=Object.keys(h.val()).length,g=0;h.forEach(function(h){h=h.val().teacherId;c[h]||(c[h]=!0,d.push(h));g++;0==(d.length<a&&g<f)&&b&&b(d)})}else b&&b(d)})}function K(a,b){Y.innerHTML="";var c=0,d=a.length;b&&(c=b.startInd,d=b.count);for(var h=0;h<d&&c<a.length;h++,c++){var f=a[c],g=document.createElement("DIV"),e=document.createElement("LI"),z=document.createElement("H5"),k=document.createElement("H7"),
l=document.createElement("SPAN");z.className="my-0";z.innerHTML="<a href=teacher.html?id="+f.teacherId+"&page=0><b>"+f.name+"</b></a>";k.className="text-muted";k.innerText=f.department;if(f.overviewInfo){var m=T(f.overviewInfo.rating);m=J(m);l.innerText="("+f.overviewInfo.ratingSize+")";m.appendChild(l);g.appendChild(m)}g.className="col-md-6";g.appendChild(z);g.appendChild(k);e.className="list-group-item d-flex justify-content-between";e.appendChild(g);Y.appendChild(e)}}function D(a,b,c,d){var h=
c.useful.count,f=c.notUseful.count,g=c.useful.userDict,e=c.notUseful.userDict,k=c=!1;b&&(c=g[b.uid]?!0:!1,k=e[b.uid]?!0:!1);b=d?h:f;a.style.color=(d?c:k)?d?"blue":"red":"black";a.innerHTML=d?'<span class="glyphicon glyphicon-thumbs-up"></span> '+b.toString()+" <b>\u0e21\u0e35\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c</b>":'<span class="glyphicon glyphicon-thumbs-down"></span> '+b.toString()+" <b>\u0e44\u0e21\u0e48\u0e21\u0e35\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c</b>"}function Z(a,
b,c,d){commentList=b;d.innerHTML="";var h=commentList.length,f=0;c&&(f=c.startInd,h=c.count);c={};var g=0;for(c.commentInd=f;g<h&&c.commentInd<b.length;c={usefulBtn:c.usefulBtn,commentKey:c.commentKey,content:c.content,commentInd:c.commentInd,notUsefulBtn:c.notUsefulBtn},++g,++c.commentInd){c.content=commentList[c.commentInd].val();c.commentKey=commentList[c.commentInd].key;f=document.createElement("LI");var e=document.createElement("DIV"),k=void 0;k=k=void 0;var l=document.createElement("H7"),m=
document.createElement("HR"),n=document.createElement("H7"),p=document.createElement("H7"),q=document.createElement("H7"),r=document.createElement("H7"),t=document.createElement("HR"),u=document.createElement("H9"),v=document.createElement("HR");c.usefulBtn=document.createElement("button");c.notUsefulBtn=document.createElement("button");f.className="card list-group-item d-flex justify-content-between";f.style="margin: 10px 0;";e.className="col-md-12";k=J('<h6 class="my-0"><b>'+Aa(c.content.timestamp)+
"</b></h6>");e.appendChild(k);k=T(c.content.rating);k=J(k);e.appendChild(k);l.className="text-muted";l.innerHTML='<i>"'+Oa[c.content.rating]+'"</i></h7> <br>';e.appendChild(l);m.className="mb-4";e.appendChild(m);n.className="text-muted";n.innerHTML="\u0e23\u0e2b\u0e31\u0e2a\u0e27\u0e34\u0e0a\u0e32: <b>"+c.content.courseId+"</b><br>";e.appendChild(n);p.className="text-muted";p.innerHTML="\u0e04\u0e27\u0e32\u0e21\u0e22\u0e32\u0e01: <b>"+c.content.difficulty+"</b></h7><br>";e.appendChild(p);q.className=
"text-muted";q.innerHTML="\u0e40\u0e01\u0e23\u0e14\u0e17\u0e35\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a: <b>"+c.content.gradRecieved+"</b></h7> <br>";e.appendChild(q);r.className="text-muted";r.innerHTML="\u0e2d\u0e22\u0e32\u0e01\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e40\u0e23\u0e35\u0e22\u0e19\u0e2d\u0e35\u0e01: <b>"+c.content.retake+"</b></h7> <br>";e.appendChild(r);t.className="mb-4";e.appendChild(t);u.innerHTML=Ba(c.content.text,c.commentKey);e.appendChild(u);v.className="mb-4";e.appendChild(v);
c.usefulBtn.className="btn btn-sm";c.notUsefulBtn.className="btn btn-sm";D(c.usefulBtn,a,commentList[c.commentInd].review,!0);D(c.notUsefulBtn,a,commentList[c.commentInd].review,!1);c.usefulBtn.addEventListener("click",function(a){return function(b){aa(b,a.usefulBtn,a.commentKey,a.content.teacherId,!0,a.commentInd)}}(c));c.notUsefulBtn.addEventListener("click",function(a){return function(b){aa(b,a.notUsefulBtn,a.commentKey,a.content.teacherId,!1,a.commentInd)}}(c));e.appendChild(c.usefulBtn);e.appendChild(c.notUsefulBtn);
f.appendChild(e);d.appendChild(f)}}function ba(a){ca.innerText="N/A";da.innerText="N/A";if(a.overviewInfo){ca.innerText=U(a.overviewInfo.difficulty,1);var b=a.overviewInfo.retake;b=U(b,100);"N/A"!=b&&(b+="%");da.innerText=b}Pa.innerText=a.name;Qa.innerText=a.department}function L(a,b,c,d){for(var e=[],f=0;b<a.length&&f<c;++b,f++)a[b].overviewInfo||e.push(a[b]);0<e.length?Ma(e,function(a){d&&d(!0)}):d&&d(!0)}function Ra(a){Na(100,function(b){l=[];for(var c=0;c<b.length;++c)l.push(a[b[c]]);var d=A(0,
l.length,10);L(l,d.startInd,d.count,function(a){K(l,d);ea.innerText="\u0e04\u0e23\u0e39\u0e17\u0e35\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e07\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23 \u0e23\u0e35\u0e27\u0e34\u0e27";B(0,l.length,10,r,t)})})}function fa(a,b,c,d){l=ya(a,b,c);d=d?parseInt(d):0;var e=A(d,l.length,10);L(l,e.startInd,e.count,function(a){K(l,e);ea.innerText=0<l.length?"\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e02\u0e49\u0e2d\u0e07":
"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e02\u0e49\u0e2d\u0e07!";B(d,l.length,10,r,t)})}function A(a,b,c){try{if(0<=b&&0<c&&-1<a){var d=0,e=c<b?c:b,f=0<c?Math.ceil(b/c):0;b=null;if(a>=f&&0<f)throw"Invalid Page";a<f&&0<a&&(d=c*a);return b={startInd:d?d:0,count:e?e:0}}throw"Invalid Parameter";}catch(g){console.log(g),alert("Page Not Found!"),window.location.href="/index.html"}return null}function M(a,b){if(a<n.length){var c=
n[a],d=m.auth().currentUser,e=null;b=b?parseInt(b):0;p?(e=A(b,p.length,5),Z(d,p,e,ha),ba(c),B(b,p.length,5,r,t)):X(a,function(f,g){p=f;n[a].overviewInfo=g;c=n[a];e=A(b,p.length,5);Z(d,p,e,ha);ba(c);B(b,p.length,5,r,t)})}else alert("Teacher doesn't exists"),window.location.href="/index.html"}function ia(a){a?(Q(a)?v&&(ja.style.display="none",ka.style.display="block"):v&&(ja.style.display="block",ka.style.display="none"),v&&(v.style.display="block",la.innerText=a.email,ma.innerText=a.displayName),w&&
(w.innerText="\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e23\u0e30\u0e1a\u0e1a"),E&&(E.style.display="block"),F&&(F.style.display="none")):(v&&(v.style.display="none",la.innerText="",ma.innerText=""),w&&(w.innerText="\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a/\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01"),E&&(E.style.display="none"),F&&(F.style.display="block"))}function aa(a,b,c,d,e,f){try{var g=R(),h=p[f].review;Ea(c,g.uid,function(a){a?a.val().useful===
e?Fa(a.key,function(a){a?(e?(h.useful.count--,delete h.useful.userDict[g.uid]):(h.notUseful.count--,delete h.notUseful.userDict[g.uid]),D(b,g,h,e)):(alert("Useful Remove Failed!"),window.location.reload(!1))}):alert("\u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e43\u0e2b\u0e49\u0e04\u0e30\u0e41\u0e19\u0e19\u0e40\u0e1b\u0e47\u0e19\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48\u0e40\u0e1b\u0e47\u0e19\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19"):
Da(c,d,g.uid,e,function(a){a?(e?(h.useful.count++,h.useful.userDict[g.uid]=!0):(h.notUseful.count++,h.notUseful.userDict[g.uid]=!0),D(b,g,h,e)):(alert("Useful Submit Failed!"),window.location.reload(!1))})})}catch(z){alert(z)}}function na(a,b,c){try{if(p){var d=e.query?e.query.page:0;d=oa(d,p.length,5,a,b,c);u("page",d);M(e.query.id,d)}else throw"Comment not loaded!";}catch(h){alert(h),window.location.href="/index.html"}}function pa(a,b,c){try{if(l){var d=e.query?parseInt(e.query.page):0;d=oa(d,l.length,
10,a,b,c);var h=A(d,l.length,10);L(l,h.startInd,h.count,function(a){u("page",d);K(l,h)})}else throw"Null Search Results!";}catch(f){alert(f),window.location.href="/index.html"}}function oa(a,b,c,d,e,f){var g=0<c?Math.ceil(b/c):0;a=a?parseInt(a):0;g=0==g?1:g;f?(a<g-1&&a++,a=a<g?a:g-1):(-1<a&&a--,a=-1<a?a:0);B(a,b,c,d,e);return a}function B(a,b,c,d,e){b=0<c?Math.ceil(b/c):0;a=a?parseInt(a):0;d.style.display=a==(0==b?1:b)-1?"none":"inline";e.style.display=0==a?"none":"inline"}var za={"\u0e2d.":!0,"\u0e1c\u0e28.":!0,
"\u0e14\u0e23.":!0,"\u0e23\u0e28.":!0,"-":!0,"\u0e2d.\u0e14\u0e23.":!0,"\u0e28.\u0e14\u0e23.":!0,"\u0e1c\u0e28.\u0e14\u0e23.":!0,"\u0e23\u0e28.\u0e14\u0e23.":!0},m=this.window.firebase,G=null,p=null,n=this.window.sTLs,l=[],Oa={"N/A":"N/A",1:"\u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e04\u0e27\u0e23\u0e44\u0e1b\u0e1e\u0e31\u0e01",2:"\u0e40\u0e09\u0e22\u0e46\u0e2d\u0e48\u0e30",3:"\u0e01\u0e47\u0e42\u0e2d\u0e19\u0e30 \u0e40\u0e23\u0e35\u0e22\u0e19\u0e46\u0e44\u0e1b\u0e40\u0e16\u0e2d\u0e30",4:"\u0e40\u0e1b\u0e47\u0e19\u0e17\u0e32\u0e07\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e17\u0e35\u0e48\u0e14\u0e35 \u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e2a\u0e2d\u0e19\u0e14\u0e35\u0e14\u0e49\u0e27\u0e22",
5:"\u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e40\u0e17\u0e1e\u0e21\u0e32\u0e01 \u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e14\u0e48\u0e27\u0e19!"};if(n)for(k=0;k<n.length;++k)xa(n[k]);var e={path:location.pathname,query:S(location.search)};delete this.window.firebase;delete this.window.sTLs;k=null;k={apiKey:"AIzaSyAdzmyl1OEbZ7htTxfqgqVHhL6a0JkmKCI",authDomain:"kru-review-8e035.firebaseapp.com",databaseURL:"https://kru-review-8e035.firebaseio.com",projectId:"kru-review-8e035",storageBucket:"kru-review-8e035.appspot.com",
messagingSenderId:"844407264902"};m.initializeApp(k);var wa=document.getElementById("div-auth-container"),v=document.getElementById("section-auth"),ka=document.getElementById("section-verified-account"),la=document.getElementById("h-email"),ma=document.getElementById("h-display-name"),w=document.getElementById("a-login-logout"),q=document.getElementById("btn-send-veri"),ja=document.getElementById("div-auth-verification");document.getElementById("tbl-comment");var Pa=document.getElementById("s-teacher-name"),
ca=document.getElementById("s-difficulty"),da=document.getElementById("s-retake"),Qa=document.getElementById("s-department"),ha=document.getElementById("li-comment"),x=document.getElementById("div-recaptcha"),qa=document.getElementById("in-course-id"),ra=document.getElementById("sel-difficulty"),sa=document.getElementById("sel-rating"),ta=document.getElementById("sel-retake"),ua=document.getElementById("tb-comment-text"),va=document.getElementById("sel-grade-recieved");k=document.getElementById("btn-submit-comment");
var F=document.getElementById("div-please-sign"),E=document.getElementById("div-add-comment"),H=document.getElementById("in-search"),N=document.getElementById("btn-search");document.getElementById("tbl-search-result");var Y=document.getElementById("li-search-result"),ea=document.getElementById("h-search-msg"),O=document.getElementById("sel-search-by"),t=document.getElementById("btn-prev-page"),r=document.getElementById("btn-next-page");document.getElementById("tbl-recently-reviewed");w&&w.addEventListener("click",
function(a){m.auth().currentUser?(a=!1,confirm("\u0e04\u0e38\u0e13\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e08\u0e30\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e23\u0e30\u0e1a\u0e1a")&&(a=!0),a&&m.auth().signOut().then(function(){window.location.href="/index.html"})["catch"](function(a){console.log(a)})):window.location.href="login.html"});r&&t&&(r.addEventListener("click",function(a){"/teacher.html"==e.path&&na(r,
t,!0);"/"!=e.path&&"/index.html"!=e.path||pa(r,t,!0)}),t.addEventListener("click",function(a){"/teacher.html"==e.path&&na(r,t,!1);"/"!=e.path&&"/index.html"!=e.path||pa(r,t,!1)}));"/dashboard.html"==e.path?q&&q.addEventListener("click",function(a){(a=m.auth().currentUser)&&a.sendEmailVerification().then(function(){})["catch"](function(a){console.log(a);alert(a)})}):"/"==e.path||"/index.html"==e.path?(k="",q="name",x=0,e.query?(k=e.query.search?e.query.search:k,q=e.query.searchBy?e.query.searchBy:
q,x=e.query.page?e.query.page:x,H.value=k,O.value=q,fa(n,k,q,x),u("searchBy",q),u("search",k),u("page",x)):Ra(n),N&&H&&O&&(N.addEventListener("click",function(){if(n){var a=H.value,b=O.value;fa(n,a,b,0);u("searchBy",b);u("search",a);u("page",0)}}),H.addEventListener("keyup",function(a){a.preventDefault();13===a.keyCode&&N.click()}))):"/teacher.html"==e.path&&e.query&&e.query.id?(P(this.window.location.href),x&&(q=new m.auth.RecaptchaVerifier("div-recaptcha"),q.render(),q.verify().then(function(a){G=
a})),k&&k.addEventListener("click",function(){for(var a=[{value:qa.value,msgTh:"\u0e27\u0e34\u0e0a\u0e32/\u0e23\u0e2b\u0e31\u0e2a\u0e27\u0e34\u0e0a\u0e32",msgEn:"Course ID"},{value:"N/A"!=ra.value,msgTh:"\u0e04\u0e27\u0e32\u0e21\u0e22\u0e32\u0e01",msgEn:"Difficulty"},{value:"N/A"!=va.value,msgTh:"\u0e40\u0e01\u0e23\u0e14\u0e17\u0e35\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a",msgEn:"Grade Recieved"},{value:"N/A"!=sa.value,msgTh:"\u0e04\u0e30\u0e41\u0e19\u0e19\u0e02\u0e2d\u0e07\u0e04\u0e23\u0e39",msgEn:"Rating"},
{value:"N/A"!=ta.value,msgTh:"\u0e2d\u0e22\u0e32\u0e01\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e40\u0e23\u0e35\u0e22\u0e19\u0e2d\u0e35\u0e01",msgEn:"Retake"},{value:ua.value,msgTh:"\u0e04\u0e33\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22",msgEn:"Comment"}],b=0;b<a.length;b++)if(!a[b].value){alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e15\u0e34\u0e21 "+a[b].msgTh);return}try{if(G){var c=R();if(!e.query.id)throw"Something went wrong, please reload this page";Ca(c.uid,e.query.id,qa.value,ra.value,va.value,sa.value,
ta.value,ua.value,function(a){a?window.location.reload(!1):alert("Add Comment Failed!")});G=null}else alert("\u0e42\u0e1b\u0e23\u0e14\u0e01\u0e23\u0e2d\u0e01 reCAPTCHA")}catch(d){console.log(d),alert(d),"Please first verify email account!"!=d&&window.location.reload(!1)}}),M(e.query.id,e.query.page)):"/login.html"==e.path?P("/index.html"):"/about.html"!=e.path&&alert("This path page exist!");m.auth().onAuthStateChanged(function(a){ia(a);"/teacher.html"==e.path&&M(e.query.id,e.query.page);G=null});
k=m.auth().currentUser;ia(k)});