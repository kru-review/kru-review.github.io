window.addEventListener("load",function(m){function P(a){wa&&(new firebaseui.auth.AuthUI(l.auth())).start("#div-auth-container",{signInOptions:[l.auth.GoogleAuthProvider.PROVIDER_ID,l.auth.FacebookAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(a,c){var b=a.user,g=a.credential,h=a.additionalUserInfo.providerId,f=a.operationType;a.additionalUserInfo.isNewUser&&console.log("This is a new user");console.log(b);console.log(g);console.log(b);console.log(h);console.log(f);return!0},
signInFailure:function(a){console.log(a)}},signInSuccessUrl:a})}function I(){return l.database().ref("kku/comment")}function D(){return l.database().ref("kku/review")}function Q(a){var b=!1;if(a.emailVerified)b=!0;else for(var c=0;c<a.providerData.length;++c)if("facebook.com"===a.providerData[c].providerId){b=!0;break}return b}function R(){var a=l.auth().currentUser;if(!a)throw"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a";if(!Q(a))throw window.location.href=
"/dashboard.html","\u0e42\u0e1b\u0e23\u0e14\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e01\u0e48\u0e2d\u0e19";return a}function xa(a){a.order&&(a.teacherId=(a.order-1).toString())}function S(a){var b=null;if(a){b={};a=a.replace("?","");a=a.split("&");for(var c=0;c<a.length;++c){var d=a[c].split("=");d[0]&&""!=d[0]&&(b[d[0]]=decodeURI(d[1]))}}return b}function ya(a,b,c){var d=[],g=[];b=b.trim(" ");b=b.toLowerCase();for(var h=b.split(" "),f=h.indexOf("");-1<
f;)h.splice(f,1),f=h.indexOf("");for(f=0;f<a.length;++f)if(a[f][c])if(-1<a[f][c].toLowerCase().search(b))d.push(a[f]);else for(var A=0;A<h.length;++A){var e=h[A];if(!za[e]&&-1<a[f][c].toLowerCase().search(e)){g.push(a[f]);break}}else break;return d=d.concat(g)}function Aa(a){a=new Date(a);return a.getDate().toString()+"/"+(a.getMonth()+1).toString()+"/"+(a.getFullYear()+543).toString()}function Ba(a,b){var c=a;if(227<a.length){c=a.substring(0,227);var d=a.substring(227);c+='<span class="collapse" id="'+
b+'">'+d+'</span> <a data-toggle="collapse" href="#'+b+'" data-target="#'+b+'">\u0e2d\u0e48\u0e32\u0e19\u0e15\u0e48\u0e2d... </a>'}return c}function T(a){var b="<div> N/A </div>";a=parseFloat(a);isNaN(a)||(0<a&&1>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
1==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':1<a&&2>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
2==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':2<a&&3>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
3==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':3<a&&4>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':
4==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>':4<a&&5>a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star half"></i>\t\t\t\t\t\t\t</div>':
5==a?b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star"></i>\t\t\t\t\t\t\t</div>':0==a&&(b='<div class="rating">\t\t\t\t\t\t\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t \t\t\t\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\t\t\t\t\t\t\t</div>'));
return b}function J(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}function U(a,b){return a&&!isNaN(a)&&b?(Math.round(100*a)/100*b).toString():"N/A"}function u(a,b){e.query||(e.query={});var c=Object.keys(e.query),d=e.path+"?",g=!1;b=encodeURI(b);for(var h=0;h<c.length;h++)d=d+c[h]+"=",c[h]==a?(d+=b,g=!0):d+=e.query[c[h]],h!=c.length-1&&(d+="&");g||(d=d+"&"+a+"="+b);history.pushState(null,null,d);e.path=location.pathname;e.query=S(location.search)}function V(a,b){var c=[];
if(a.exists()){var d=Object.keys(a.val()).length,g=0;a.forEach(function(a){c.push(a);g++;g==d&&b&&b(c)})}else b&&b(c)}function W(a,b,c,d){return{useful:{userDict:a?a:{},count:b?b:0},notUseful:{userDict:c?c:{},count:d?d:0}}}function Ca(a,b,c,d,g,h,f,A,e){a={uid:a,teacherId:b,courseId:c,difficulty:d,gradRecieved:g,rating:h,retake:f,text:A,timestamp:l.database.ServerValue.TIMESTAMP};I().push(a).then(function(a){e&&e(!0)})["catch"](function(a){console.log(a);e&&e(!1)})}function Da(a,b,c,d,g){D().push({uid:c,
commentId:a,teacherId:b,useful:d}).then(function(a){g&&g(!0)})["catch"](function(a){console.log(a);g&&g(!1)})}function Ea(a,b,c){D().orderByChild("uid").equalTo(b).once("value").then(function(b){if(b.exists()){var d=Object.keys(b.val()).length,h=0;b.forEach(function(b){if(b.val().commentId==a)return c(b),!0;h++;h==d&&c&&c(null)})}else c&&c(null)})["catch"](function(a){console.log(a);c&&c(null)})}function Fa(a,b){D().child(a).remove().then(function(a){b&&b(!0)})["catch"](function(a){b&&b(!1)})}function Ga(a,
b){I().orderByChild("timestamp").limitToLast(a).once("value").then(function(a){b&&b(a)})}function Ha(a,b){I().orderByChild("teacherId").equalTo(a).once("value").then(function(a){b&&b(a)})}function Ia(a,b){D().orderByChild("teacherId").equalTo(a).once("value").then(function(a){b&&b(a)})["catch"](function(a){throw a;})}function Ja(a,b){var c=[];try{Ha(a,function(a){V(a,function(a){b&&(a=a.reverse(),b(a))})})}catch(d){console.log(d),b&&b(c)}}function Ka(a,b){var c=[];try{Ia(a,function(a){V(a,function(a){b&&
b(a)})})}catch(d){console.log(d),b&&b(c)}}function X(a,b){La(a,function(c){Ja(a,function(a){var d=null;0<a.length&&(d={rating:0,ratingSize:0,difficulty:0,difficultySize:0,retake:0,retakeSize:0,commentSize:0});for(var h=0;h<a.length;++h){var f=a[h].key;a[h].review=c[f]?c[f].review:W();f=a[h].val();"N/A"!=f.difficulty&&(d.difficulty+=parseInt(f.difficulty),d.difficultySize++);"N/A"!=f.retake&&(d.retake+="Yes"==f.retake?1:0,d.retakeSize++);"N/A"!=f.rating&&(d.rating+=parseInt(f.rating),d.ratingSize++)}d&&
(d.difficulty/=d.difficultySize,d.retake=d.retake?1-d.retake/d.retakeSize:0,d.commentSize=a.length,d.rating/=d.ratingSize);b&&b(a,d)})})}function La(a,b){var c={};Ka(a,function(a){for(var d=0;d<a.length;++d){var h=a[d].val(),f=h.commentId,e=h.useful;c[f]||(c[f]={review:W()});e?(c[f].review.useful.userDict[h.uid]=!0,c[f].review.useful.count++):(c[f].review.notUseful.userDict[h.uid]=!0,c[f].review.notUseful.count++)}b&&b(c)})}function Ma(a,b){for(var c=[],d={i:0};d.i<a.length;d={teacherId:d.teacherId,
i:d.i},++d.i){d.teacherId=a[d.i].teacherId;var g=new Promise(function(b){return function(c,d){X(b.teacherId,function(d,f){a[b.i].overviewInfo=f;c(!0)})}}(d));c.push(g)}Promise.all(c).then(function(a){b(!0)})}function Na(a,b){var c={},d=[];Ga(1E3,function(g){if(g.exists()){var h=Object.keys(g.val()).length,f=0;g.forEach(function(g){g=g.val().teacherId;c[g]||(c[g]=!0,d.push(g));f++;0==(d.length<a&&f<h)&&b&&b(d)})}else b&&b(d)})}function E(a,b,c,d){var g=c.useful.count,h=c.notUseful.count,f=c.useful.userDict,
e=c.notUseful.userDict,p=c=!1;b&&(c=f[b.uid]?!0:!1,p=e[b.uid]?!0:!1);b=d?g:h;a.style.color=(d?c:p)?d?"blue":"red":"black";a.innerHTML=d?'<span class="glyphicon glyphicon-thumbs-up"></span> '+b.toString()+" <b>\u0e21\u0e35\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c</b>":'<span class="glyphicon glyphicon-thumbs-down"></span> '+b.toString()+" <b>\u0e44\u0e21\u0e48\u0e21\u0e35\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c</b>"}function Y(a,b,c,d){commentList=b;d.innerHTML="";var g=commentList.length,
h=0;c&&(h=c.startInd,g=c.count);c={};var f=0;for(c.commentInd=h;f<g&&c.commentInd<b.length;c={usefulBtn:c.usefulBtn,commentKey:c.commentKey,content:c.content,commentInd:c.commentInd,notUsefulBtn:c.notUsefulBtn},++f,++c.commentInd){c.content=commentList[c.commentInd].val();c.commentKey=commentList[c.commentInd].key;h=document.createElement("LI");var e=document.createElement("DIV"),p=void 0;p=p=void 0;var k=document.createElement("H7"),m=document.createElement("HR"),l=document.createElement("H7"),n=
document.createElement("H7"),q=document.createElement("H7"),r=document.createElement("H7"),t=document.createElement("HR"),u=document.createElement("H9"),v=document.createElement("HR");c.usefulBtn=document.createElement("button");c.notUsefulBtn=document.createElement("button");h.className="card list-group-item d-flex justify-content-between";h.style="margin: 10px 0;";e.className="col-md-12";p=J('<h6 class="my-0"><b>'+Aa(c.content.timestamp)+"</b></h6>");e.appendChild(p);p=T(c.content.rating);p=J(p);
e.appendChild(p);k.className="text-muted";k.innerHTML='<i>"'+Oa[c.content.rating]+'"</i></h7> <br>';e.appendChild(k);m.className="mb-4";e.appendChild(m);l.className="text-muted";l.innerHTML="\u0e23\u0e2b\u0e31\u0e2a\u0e27\u0e34\u0e0a\u0e32: <b>"+c.content.courseId+"</b><br>";e.appendChild(l);n.className="text-muted";n.innerHTML="\u0e04\u0e27\u0e32\u0e21\u0e22\u0e32\u0e01: <b>"+c.content.difficulty+"</b></h7><br>";e.appendChild(n);q.className="text-muted";q.innerHTML="\u0e40\u0e01\u0e23\u0e14\u0e17\u0e35\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a: <b>"+
c.content.gradRecieved+"</b></h7> <br>";e.appendChild(q);r.className="text-muted";r.innerHTML="\u0e2d\u0e22\u0e32\u0e01\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e40\u0e23\u0e35\u0e22\u0e19\u0e2d\u0e35\u0e01: <b>"+c.content.retake+"</b></h7> <br>";e.appendChild(r);t.className="mb-4";e.appendChild(t);u.innerHTML=Ba(c.content.text,c.commentKey);e.appendChild(u);v.className="mb-4";e.appendChild(v);c.usefulBtn.className="btn btn-sm";c.notUsefulBtn.className="btn btn-sm";E(c.usefulBtn,a,commentList[c.commentInd].review,
!0);E(c.notUsefulBtn,a,commentList[c.commentInd].review,!1);c.usefulBtn.addEventListener("click",function(a){return function(b){Z(b,a.usefulBtn,a.commentKey,a.content.teacherId,!0,a.commentInd)}}(c));c.notUsefulBtn.addEventListener("click",function(a){return function(b){Z(b,a.notUsefulBtn,a.commentKey,a.content.teacherId,!1,a.commentInd)}}(c));e.appendChild(c.usefulBtn);e.appendChild(c.notUsefulBtn);h.appendChild(e);d.appendChild(h)}}function aa(a){ba.innerText="N/A";ca.innerText="N/A";if(a.overviewInfo){ba.innerText=
U(a.overviewInfo.difficulty,1);var b=a.overviewInfo.retake;b=U(b,100);"N/A"!=b&&(b+="%");ca.innerText=b}Pa.innerText=a.name;Qa.innerText=a.department}function K(a,b){da.innerHTML="";var c=0,d=a.length;b&&(c=b.startInd,d=b.count);for(var g=0;g<d&&c<a.length;g++,c++){var e=a[c],f=document.createElement("DIV"),k=document.createElement("LI"),p=document.createElement("H5"),l=document.createElement("H7"),m=document.createElement("SPAN");p.className="my-0";p.innerHTML="<a href=teacher.html?id="+e.teacherId+
"&page=0><b>"+e.name+"</b></a>";l.className="text-muted";l.innerText=e.department;if(e.overviewInfo){var n=T(e.overviewInfo.rating);n=J(n);m.innerText="("+e.overviewInfo.ratingSize+")";n.appendChild(m);f.appendChild(n)}f.className="col-md-6";f.appendChild(p);f.appendChild(l);k.className="list-group-item d-flex justify-content-between";k.appendChild(f);da.appendChild(k)}ea.innerText=0<a.length?"\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e02\u0e49\u0e2d\u0e07":
"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e02\u0e49\u0e2d\u0e07!"}function L(a,b,c,d){for(var e=[];b<c;++b)a[b].overviewInfo||e.push(a[b]);0<e.length?Ma(e,function(a){d&&d(!0)}):d&&d(!0)}function Ra(a){Na(100,function(b){k=[];for(var c=0;c<b.length;++c)k.push(a[b[c]]);var d=B(0,k.length,10);L(k,d.startInd,d.count,function(a){K(k,d);ea.innerText="\u0e04\u0e23\u0e39\u0e17\u0e35\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e07\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23 review";
C(0,k.length,10,r,t)})})}function fa(a,b,c,d){k=ya(a,b,c);d=d?parseInt(d):0;var e=B(d,k.length,10);L(k,e.startInd,e.count,function(a){K(k,e);C(d,k.length,10,r,t)})}function B(a,b,c){try{if(0<=b&&0<c&&-1<a){var d=0,e=c<b?c:b,h=0<c?Math.ceil(b/c):0;b=null;if(a>=h&&0<h)throw"Invalid Page";a<h&&0<a&&(d=c*a);return b={startInd:d?d:0,count:e?e:0}}throw"Invalid Parameter";}catch(f){console.log(f),alert("Page Not Found!"),window.location.href="/index.html"}return null}function M(a,b){if(a<n.length){var c=
n[a],d=l.auth().currentUser,e=null;b=b?parseInt(b):0;q?(e=B(b,q.length,5),Y(d,q,e,ha),aa(c),C(b,q.length,5,r,t)):X(a,function(h,f){q=h;n[a].overviewInfo=f;c=n[a];e=B(b,q.length,5);Y(d,q,e,ha);aa(c);C(b,q.length,5,r,t)})}else alert("Teacher doesn't exists"),window.location.href="/index.html"}function ia(a){a?(Q(a)?x&&(ja.style.display="none",ka.style.display="block"):x&&(ja.style.display="block",ka.style.display="none"),x&&(x.style.display="block",la.innerText=a.email,ma.innerText=a.displayName),y&&
(y.innerText="\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e23\u0e30\u0e1a\u0e1a"),F&&(F.style.display="block"),G&&(G.style.display="none")):(x&&(x.style.display="none",la.innerText="",ma.innerText=""),y&&(y.innerText="\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a"),F&&(F.style.display="none"),G&&(G.style.display="block"))}function Z(a,b,c,d,e,h){try{var f=R(),g=q[h].review;Ea(c,f.uid,function(a){a?a.val().useful===e?Fa(a.key,function(a){a?(e?(g.useful.count--,delete g.useful.userDict[f.uid]):
(g.notUseful.count--,delete g.notUseful.userDict[f.uid]),E(b,f,g,e)):(alert("Useful Remove Failed!"),window.location.reload(!1))}):alert("\u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e43\u0e2b\u0e49\u0e04\u0e30\u0e41\u0e19\u0e19\u0e40\u0e1b\u0e47\u0e19\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48\u0e40\u0e1b\u0e47\u0e19\u0e1b\u0e23\u0e30\u0e42\u0e22\u0e0a\u0e19\u0e4c\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19"):Da(c,d,f.uid,e,function(a){a?
(e?(g.useful.count++,g.useful.userDict[f.uid]=!0):(g.notUseful.count++,g.notUseful.userDict[f.uid]=!0),E(b,f,g,e)):(alert("Useful Submit Failed!"),window.location.reload(!1))})})}catch(p){alert(p)}}function na(a,b,c){try{if(q){var d=e.query?e.query.page:0;d=oa(d,q.length,5,a,b,c);u("page",d);M(e.query.id,d)}else throw"Comment not loaded!";}catch(g){alert(g),window.location.href="/index.html"}}function pa(a,b,c){try{if(k){var d=e.query?parseInt(e.query.page):0;d=oa(d,k.length,10,a,b,c);var g=B(d,k.length,
10);L(k,g.startInd,g.count,function(a){u("page",d);K(k,g)})}else throw"Null Search Results!";}catch(h){alert(h),window.location.href="/index.html"}}function oa(a,b,c,d,e,h){var f=0<c?Math.ceil(b/c):0;a=a?parseInt(a):0;f=0==f?1:f;h?(a<f-1&&a++,a=a<f?a:f-1):(-1<a&&a--,a=-1<a?a:0);C(a,b,c,d,e);return a}function C(a,b,c,d,e){b=0<c?Math.ceil(b/c):0;a=a?parseInt(a):0;d.style.display=a==(0==b?1:b)-1?"none":"inline";e.style.display=0==a?"none":"inline"}var za={"\u0e2d.":!0,"\u0e1c\u0e28.":!0,"\u0e14\u0e23.":!0,
"\u0e23\u0e28.":!0,"-":!0,"\u0e2d.\u0e14\u0e23.":!0,"\u0e28.\u0e14\u0e23.":!0,"\u0e1c\u0e28.\u0e14\u0e23.":!0,"\u0e23\u0e28.\u0e14\u0e23.":!0},l=this.window.firebase,H=null,q=null,n=this.window.sTLs,k=[],Oa={"N/A":"N/A",1:"\u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e04\u0e27\u0e23\u0e44\u0e1b\u0e1e\u0e31\u0e01",2:"\u0e40\u0e09\u0e22\u0e46\u0e2d\u0e48\u0e30",3:"\u0e01\u0e47\u0e42\u0e2d\u0e19\u0e30 \u0e40\u0e23\u0e35\u0e22\u0e19\u0e46\u0e44\u0e1b\u0e40\u0e16\u0e2d\u0e30",4:"\u0e40\u0e1b\u0e47\u0e19\u0e17\u0e32\u0e07\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e17\u0e35\u0e48\u0e14\u0e35 \u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e2a\u0e2d\u0e19\u0e14\u0e35\u0e14\u0e49\u0e27\u0e22",
5:"\u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e40\u0e17\u0e1e\u0e21\u0e32\u0e01 \u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e14\u0e48\u0e27\u0e19!"};if(n)for(m=0;m<n.length;++m)xa(n[m]);var e={path:location.pathname,query:S(location.search)};delete this.window.firebase;delete this.window.sTLs;m=null;m={apiKey:"AIzaSyAdzmyl1OEbZ7htTxfqgqVHhL6a0JkmKCI",authDomain:"kru-review-8e035.firebaseapp.com",databaseURL:"https://kru-review-8e035.firebaseio.com",projectId:"kru-review-8e035",storageBucket:"kru-review-8e035.appspot.com",
messagingSenderId:"844407264902"};l.initializeApp(m);var wa=document.getElementById("div-auth-container"),x=document.getElementById("section-auth"),ka=document.getElementById("section-verified-account"),la=document.getElementById("h-email"),ma=document.getElementById("h-display-name"),y=document.getElementById("a-login-logout"),v=document.getElementById("btn-send-veri"),ja=document.getElementById("div-auth-verification");document.getElementById("tbl-comment");var Pa=document.getElementById("s-teacher-name"),
ba=document.getElementById("s-difficulty"),ca=document.getElementById("s-retake"),Qa=document.getElementById("s-department"),ha=document.getElementById("li-comment"),z=document.getElementById("div-recaptcha"),qa=document.getElementById("in-course-id"),ra=document.getElementById("sel-difficulty"),sa=document.getElementById("sel-rating"),ta=document.getElementById("sel-retake"),ua=document.getElementById("tb-comment-text"),va=document.getElementById("sel-grade-recieved"),w=document.getElementById("btn-submit-comment"),
G=document.getElementById("div-please-sign"),F=document.getElementById("div-add-comment"),N=document.getElementById("in-search");m=document.getElementById("btn-search");document.getElementById("tbl-search-result");var da=document.getElementById("li-search-result"),ea=document.getElementById("h-search-msg"),O=document.getElementById("sel-search-by"),t=document.getElementById("btn-prev-page"),r=document.getElementById("btn-next-page");document.getElementById("tbl-recently-reviewed");y&&y.addEventListener("click",
function(a){l.auth().currentUser?(a=!1,confirm("\u0e04\u0e38\u0e13\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e08\u0e30\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e23\u0e30\u0e1a\u0e1a")&&(a=!0),a&&l.auth().signOut().then(function(){window.location.href="/index.html"})["catch"](function(a){console.log(a)})):window.location.href="login.html"});r&&t&&(r.addEventListener("click",function(a){"/teacher.html"==e.path&&na(r,
t,!0);"/"!=e.path&&"/index.html"!=e.path||pa(r,t,!0)}),t.addEventListener("click",function(a){"/teacher.html"==e.path&&na(r,t,!1);"/"!=e.path&&"/index.html"!=e.path||pa(r,t,!1)}));"/dashboard.html"==e.path?v&&v.addEventListener("click",function(a){(a=l.auth().currentUser)&&a.sendEmailVerification().then(function(){})["catch"](function(a){console.log(a);alert(a)})}):"/"==e.path||"/index.html"==e.path?(w="",v="name",z=0,e.query?(w=e.query.search?e.query.search:w,v=e.query.searchBy?e.query.searchBy:
v,z=e.query.page?e.query.page:z,N.value=w,O.value=v,fa(n,w,v,z),u("searchBy",v),u("search",w),u("page",z)):Ra(n),m&&N&&O&&m.addEventListener("click",function(){if(n){var a=N.value,b=O.value;fa(n,a,b,0);u("searchBy",b);u("search",a);u("page",0)}})):"/teacher.html"==e.path&&e.query&&e.query.id?(P(this.window.location.href),z&&(m=new l.auth.RecaptchaVerifier("div-recaptcha"),m.render(),m.verify().then(function(a){H=a})),w&&w.addEventListener("click",function(){for(var a=[{value:qa.value,msgTh:"\u0e27\u0e34\u0e0a\u0e32/\u0e23\u0e2b\u0e31\u0e2a\u0e27\u0e34\u0e0a\u0e32",
msgEn:"Course ID"},{value:"N/A"!=ra.value,msgTh:"\u0e04\u0e27\u0e32\u0e21\u0e22\u0e32\u0e01",msgEn:"Difficulty"},{value:"N/A"!=va.value,msgTh:"\u0e40\u0e01\u0e23\u0e14\u0e17\u0e35\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a",msgEn:"Grade Recieved"},{value:"N/A"!=sa.value,msgTh:"\u0e04\u0e30\u0e41\u0e19\u0e19\u0e02\u0e2d\u0e07\u0e04\u0e23\u0e39",msgEn:"Rating"},{value:"N/A"!=ta.value,msgTh:"\u0e2d\u0e22\u0e32\u0e01\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e40\u0e23\u0e35\u0e22\u0e19\u0e2d\u0e35\u0e01",
msgEn:"Retake"},{value:ua.value,msgTh:"\u0e04\u0e33\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22",msgEn:"Comment"}],b=0;b<a.length;b++)if(!a[b].value){alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e15\u0e34\u0e21 "+a[b].msgTh);return}try{if(H){var c=R();if(!e.query.id)throw"Something went wrong, please reload this page";Ca(c.uid,e.query.id,qa.value,ra.value,va.value,sa.value,ta.value,ua.value,function(a){a?window.location.reload(!1):alert("Add Comment Failed!")});H=null}else alert("\u0e42\u0e1b\u0e23\u0e14\u0e01\u0e23\u0e2d\u0e01 reCAPTCHA")}catch(d){console.log(d),
alert(d),"Please first verify email account!"!=d&&window.location.reload(!1)}}),M(e.query.id,e.query.page)):"/login.html"==e.path?P("/index.html"):"/about.html"!=e.path&&alert("This path page exist!");l.auth().onAuthStateChanged(function(a){ia(a);"/teacher.html"==e.path&&M(e.query.id,e.query.page);H=null});m=l.auth().currentUser;ia(m)});